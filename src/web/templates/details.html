<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPU-Insight 痛点详情</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans SC', 'Roboto', sans-serif; background: #f5f5f5; }
        .card { background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .chain-step { position: relative; padding-left: 24px; }
        .chain-step::before { content: ''; position: absolute; left: 8px; top: 0; bottom: 0; width: 2px; background: #1976D2; }
        .chain-step::after { content: ''; position: absolute; left: 4px; top: 6px; width: 10px; height: 10px; border-radius: 50%; background: #1976D2; }
        .chain-step:last-child::before { display: none; }
    </style>
</head>
<body class="min-h-screen">
    <header class="bg-blue-700 text-white py-4 px-6 shadow">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold">痛点详情</h1>
                <p class="text-blue-200 text-sm"><a href="/" class="hover:underline">← 返回仪表盘</a></p>
            </div>
            <span class="material-icons text-3xl">search</span>
        </div>
    </header>

    <main class="max-w-4xl mx-auto py-6 px-4">
        <!-- 痛点概览 -->
        <div class="card p-6 mb-6">
            <div class="flex justify-between items-start">
                <div>
                    <h2 class="text-2xl font-bold">{{ pain_point.pain_point | default('显存容量不足') }}</h2>
                    <p class="text-gray-500 mt-1">
                        分类：{{ pain_point.category | default('显存') }} |
                        讨论量：{{ pain_point.mentions | default(105) }} 条 |
                        来源：{{ pain_point.sources | default(['chiphell', 'reddit']) | join(', ') }}
                    </p>
                </div>
                <div class="text-right">
                    <p class="text-3xl font-bold text-blue-700">{{ pain_point.pphi_score | default(40.3) }}</p>
                    <p class="text-sm text-gray-500">PPHI 指数</p>
                </div>
            </div>
        </div>

        <!-- 隐藏需求 -->
        <div class="card p-6 mb-6">
            <h3 class="text-lg font-bold mb-3 flex items-center gap-2">
                <span class="material-icons text-blue-700">lightbulb</span>
                隐藏需求
            </h3>
            <p class="text-lg mb-4">{{ pain_point.hidden_need | default('平价显卡的本地 AI 算力平权') }}</p>

            <div class="bg-gray-50 rounded-lg p-4">
                <p class="text-sm font-bold text-gray-600 mb-3">推理链</p>
                <div class="space-y-4">
                    {% for step in pain_point.reasoning_chain | default(['用户需要在本地运行 AI 应用', '当前中端卡显存不足', '用户无法承担高端卡价格', '隐藏需求：平价 AI 算力平权']) %}
                    <div class="chain-step">
                        <p class="text-sm text-gray-700 pb-3">{{ step }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <div class="mt-4 flex gap-4">
                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">
                    置信度：{{ (pain_point.confidence | default(0.82) * 100) | int }}%
                </span>
                <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">
                    Council 通过
                </span>
            </div>
        </div>

        <!-- Expert Council 评审 -->
        <div class="card p-6 mb-6">
            <h3 class="text-lg font-bold mb-3 flex items-center gap-2">
                <span class="material-icons text-blue-700">groups</span>
                Expert Council 评审
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-gray-50 rounded-lg p-4">
                    <p class="text-sm font-bold text-gray-600 mb-1">硬件工程师</p>
                    <p class="text-sm">{{ pain_point.hardware_assessment | default('技术可行性中等，统一内存架构或显存压缩技术可绕过传统瓶颈') }}</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4">
                    <p class="text-sm font-bold text-gray-600 mb-1">产品经理</p>
                    <p class="text-sm">{{ pain_point.product_assessment | default('商业价值极高，精准切中消费级市场断层') }}</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4">
                    <p class="text-sm font-bold text-gray-600 mb-1">数据科学家</p>
                    <p class="text-sm">{{ pain_point.data_assessment | default('推理链数据支撑度尚可，需更多跨平台验证') }}</p>
                </div>
            </div>
        </div>

        <!-- 原始讨论 -->
        <div class="card p-6">
            <h3 class="text-lg font-bold mb-3 flex items-center gap-2">
                <span class="material-icons text-blue-700">forum</span>
                原始讨论
            </h3>
            {% for post in posts | default([]) %}
            <div class="border-b py-3 last:border-0">
                <p class="text-sm font-medium">[{{ post.source }}] {{ post.title }}</p>
                <p class="text-sm text-gray-500 mt-1">{{ post.content[:100] }}...</p>
                <a href="{{ post.url }}" target="_blank" class="text-xs text-blue-600 hover:underline">查看原文 →</a>
            </div>
            {% else %}
            <p class="text-gray-400 text-sm">等待数据采集后展示原始讨论...</p>
            {% endfor %}
        </div>
    </main>
</body>
</html>
