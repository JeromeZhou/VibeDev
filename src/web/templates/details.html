<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç—›ç‚¹è¯¦æƒ… â€” GPU-Insight</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Noto+Sans+SC:wght@400;500;600&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link href="/static/base.css?v=1.1" rel="stylesheet">
    <script src="/static/theme.js"></script>
    <style>
        /* â”€â”€ é¡µé¢ä¸“å±æ ·å¼ â”€â”€ */
        .need-card {
            background: var(--bg-surface);
            border: 1px solid rgba(139,92,246,0.15);
        }

        .trend-pill {
            display: inline-flex; align-items: center; gap: 4px;
            padding: 2px 8px; border-radius: 20px; font-size: 12px; font-weight: 600;
        }
        .trend-rising  { background: rgba(94,196,158,0.10); color: var(--accent-green); border: 1px solid rgba(94,196,158,0.18); }
        .trend-falling { background: rgba(229,83,75,0.10); color: var(--accent-red); border: 1px solid rgba(229,83,75,0.18); }
        .trend-new     { background: rgba(91,141,239,0.10); color: var(--accent-blue); border: 1px solid rgba(91,141,239,0.18); }
        .trend-stable  { background: rgba(86,88,105,0.12); color: var(--text-tertiary); border: 1px solid rgba(86,88,105,0.20); }

        .pphi-detail-ring {
            width: 44px; height: 44px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--border-strong);
            background: transparent;
        }
        .pphi-detail-ring.rank-1 { border-color: var(--accent-amber); }
        .pphi-detail-ring.rank-2 { border-color: var(--accent-silver); }
        .pphi-detail-ring.rank-3 { border-color: var(--accent-bronze); }
        .pphi-detail-ring.rank-default { border-color: var(--accent-blue); }

        /* â”€â”€ é¡µé¢ä¸“å±å·¥å…·ç±» â”€â”€ */
        .items-start { align-items: flex-start; }
        .shrink-0 { flex-shrink: 0; }
        .gap-05 { gap: 2px; }
        .mt-05 { margin-top: 2px; }
        .mt-1 { margin-top: 4px; }
        .mt-3 { margin-top: 12px; }
        .mb-3 { margin-bottom: 12px; }
        .py-05 { padding-top: 2px; padding-bottom: 2px; }
        .py-1 { padding-top: 4px; padding-bottom: 4px; }
        .py-2 { padding-top: 8px; padding-bottom: 8px; }
        .px-2 { padding-left: 8px; padding-right: 8px; }
        .px-3 { padding-left: 12px; padding-right: 12px; }
        .px-4 { padding-left: 16px; padding-right: 16px; }
        .p-12 { padding: 48px; }
        .leading-relaxed { line-height: 1.625; }
        .tracking-wider { letter-spacing: 0.05em; }
        .uppercase { text-transform: uppercase; }
        .italic { font-style: italic; }
        .rounded-md { border-radius: 6px; }
        .rounded-full { border-radius: 9999px; }
        .h-1 { height: 4px; }
        .w-7 { width: 28px; }
        .h-7 { height: 28px; }
        .w-8 { width: 32px; }
        .h-8 { height: 32px; }
        .text-5xl { font-size: 48px; }
        .text-white { color: #fff; }
        .gap-x-8 { column-gap: 32px; }
        .gap-y-4 { row-gap: 16px; }
        .ml-auto { margin-left: auto; }
        .inline-flex { display: inline-flex; }
        .transition { transition: all 0.2s ease; }
    </style>
</head>
<body>
    <nav class="site-nav">
        <span class="nav-brand"><span class="material-icons">insights</span> GPU-Insight</span>
        <a href="/"><span class="material-icons">dashboard</span> ä»ªè¡¨ç›˜</a>
        <a href="/gpu-models"><span class="material-icons">memory</span> å‹å·</a>
        <a href="/trends"><span class="material-icons">trending_up</span> è¶‹åŠ¿</a>
        <a href="/history"><span class="material-icons">history</span> å†å²</a>
        <a href="/report"><span class="material-icons">description</span> æŠ¥å‘Š</a>
        <a href="/admin"><span class="material-icons">admin_panel_settings</span> ç®¡ç†</a>
        <span class="nav-spacer"></span>
        <button class="theme-toggle" onclick="toggleTheme()"><span class="material-icons theme-icon">light_mode</span></button>
    </nav>

    <main class="page-container">
        {% if pain_point %}
        <!-- ç—›ç‚¹æ¦‚è§ˆ -->
        <div class="card p-6 mb-4 animate-in" style="animation-delay: 0.05s">
            <div class="flex items-start justify-between gap-4">
                <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-3 mb-3 flex-wrap">
                        <span class="text-2xl font-semibold mono
                            {% if pain_point.get('rank') == 1 %}" style="color: var(--accent-amber);
                            {% elif pain_point.get('rank') == 2 %}" style="color: var(--accent-silver);
                            {% elif pain_point.get('rank') == 3 %}" style="color: var(--accent-bronze);
                            {% else %}" style="color: var(--accent-blue);{% endif %}">#{{ pain_point.get('rank', '?') }}</span>
                        <h2 class="text-lg font-semibold" style="color: var(--text-primary);">{{ pain_point.pain_point }}</h2>
                        <span class="trend-pill
                            {% if pain_point.get('trend') == 'hot' %}trend-rising
                            {% elif pain_point.get('trend') == 'rising' %}trend-rising
                            {% elif pain_point.get('trend') == 'falling' %}trend-falling
                            {% elif pain_point.get('trend') == 'new' %}trend-new
                            {% else %}trend-stable{% endif %}">
                            {% if pain_point.get('trend') == 'hot' %}ğŸ”¥ çƒ­é—¨
                            {% elif pain_point.get('trend') == 'rising' %}â†‘ ä¸Šå‡
                            {% elif pain_point.get('trend') == 'falling' %}â†“ ä¸‹é™
                            {% elif pain_point.get('trend') == 'new' %}â˜… æ–°å¢
                            {% else %}â†’ ç¨³å®š{% endif %}
                        </span>
                    </div>
                    <div class="flex flex-wrap gap-2">
                        {% set qt = pain_point.get('quality_tier', 'bronze') %}
                        <span class="text-xs px-3 py-1 rounded-md flex items-center gap-1" style="border: 1px solid var(--border-subtle);
                            {% if qt == 'gold' %}background: rgba(245,158,11,0.12); color: var(--accent-amber);
                            {% elif qt == 'silver' %}background: rgba(99,102,241,0.12); color: var(--accent-blue);
                            {% else %}background: var(--bg-elevated); color: var(--text-tertiary);{% endif %}">
                            {% if qt == 'gold' %}ğŸ¥‡ å·²éªŒè¯{% elif qt == 'silver' %}ğŸ¥ˆ éƒ¨åˆ†éªŒè¯{% else %}ğŸ¥‰ å¾…éªŒè¯{% endif %}
                        </span>
                        <span class="text-xs px-3 py-1 rounded-md flex items-center gap-1" style="background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border-subtle);">
                            <span class="material-icons text-xs">category</span> {{ pain_point.get('category', '-') }}
                        </span>
                        <span class="text-xs px-3 py-1 rounded-md flex items-center gap-1" style="background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border-subtle);">
                            <span class="material-icons text-xs">people</span> {{ pain_point.get('affected_users', '-') }}
                        </span>
                        <span class="text-xs px-3 py-1 rounded-md flex items-center gap-1" style="background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border-subtle);">
                            <span class="material-icons text-xs">forum</span> {{ pain_point.get('mentions', 0) }} è®¨è®º
                        </span>
                        <span class="text-xs px-3 py-1 rounded-md" style="background: var(--bg-elevated); color: var(--text-secondary); border: 1px solid var(--border-subtle);">
                            {{ pain_point.get('sources', []) | join(', ') }}
                        </span>
                    </div>
                </div>
                <div class="text-center shrink-0">
                    <div class="pphi-detail-ring pphi-pulse
                        {% if pain_point.get('rank') == 1 %}rank-1
                        {% elif pain_point.get('rank') == 2 %}rank-2
                        {% elif pain_point.get('rank') == 3 %}rank-3
                        {% else %}rank-default{% endif %}"
                        style="--pulse-color: {% if pain_point.get('rank') == 1 %}var(--accent-amber){% elif pain_point.get('rank') == 2 %}var(--accent-silver){% elif pain_point.get('rank') == 3 %}var(--accent-bronze){% else %}var(--accent-blue){% endif %}">
                        <p class="text-base font-semibold mono
                            {% if pain_point.get('rank') == 1 %}" style="color: var(--accent-amber);
                            {% elif pain_point.get('rank') == 2 %}" style="color: var(--accent-silver);
                            {% elif pain_point.get('rank') == 3 %}" style="color: var(--accent-bronze);
                            {% else %}" style="color: var(--accent-blue);{% endif %}">{{ pain_point.pphi_score }}</p>
                    </div>
                    <p class="text-xs mt-1 mono" style="color: var(--text-tertiary);">PPHI</p>
                </div>
            </div>

            {% if pain_point.get('evidence') %}
            <div class="mt-4 p-4 rounded-lg" style="background: var(--bg-elevated); border-left: 2px solid var(--accent-blue);">
                <p class="text-xs mb-1 flex items-center gap-1" style="color: var(--text-tertiary);">
                    <span class="material-icons text-xs">format_quote</span> è¯æ®æ‘˜è¦
                </p>
                <p class="text-sm leading-relaxed" style="color: var(--text-secondary);">{{ pain_point.evidence }}</p>
            </div>
            {% endif %}
        </div>

        <!-- PPHI è¶‹åŠ¿å°å›¾ -->
        <div class="card p-6 mb-4 animate-in" style="animation-delay: 0.08s">
            <h3 class="font-medium mb-3 flex items-center gap-2" style="color: var(--text-primary);">
                <span class="material-icons" style="color: var(--accent-green);">show_chart</span> PPHI è¶‹åŠ¿
            </h3>
            <div style="height: 160px;">
                <canvas id="trendChart"></canvas>
            </div>
        </div>

        <!-- AI æ¨ç†éœ€æ±‚ -->
        {% set inferred = pain_point.get('inferred_need') %}
        {% if inferred and inferred.get('hidden_need') %}
        <div class="card need-card p-6 mb-4 animate-in ambient-arc" style="animation-delay: 0.1s">
            <h3 class="font-medium mb-3 flex items-center gap-2" style="color: var(--text-primary);">
                <span class="material-icons" style="color: var(--accent-purple);">psychology</span> AI æ¨ç†éœ€æ±‚
                {% if inferred.get('confidence', 0) < 0.6 %}
                <span class="text-xs px-2 py-05 rounded-full ml-auto" style="background: rgba(212,160,74,0.10); color: var(--accent-amber); border: 1px solid rgba(212,160,74,0.18);">å¾…éªŒè¯</span>
                {% endif %}
                {% if inferred.get('munger_rejected') %}
                <span class="text-xs px-2 py-05 rounded-full ml-auto" style="background: rgba(229,83,75,0.10); color: var(--accent-red); border: 1px solid rgba(229,83,75,0.18);">âŒ Munger å¦å†³</span>
                {% endif %}
            </h3>
            <p class="text-base leading-relaxed mb-4" style="color: var(--accent-purple);">{{ inferred.hidden_need }}</p>

            <!-- æ¨ç†é“¾ -->
            {% if inferred.get('reasoning_chain') %}
            <div class="mt-4 p-4 rounded-lg" style="background: var(--bg-elevated); border-left: 2px solid var(--accent-purple);">
                <p class="text-xs mb-2 flex items-center gap-1 font-medium" style="color: var(--text-tertiary);">
                    <span class="material-icons text-xs">account_tree</span> æ¨ç†é“¾
                </p>
                <div class="reasoning-timeline">
                    {% for step in inferred.reasoning_chain %}
                    <div class="reasoning-step" style="--step-delay: {{ loop.index0 * 0.5 }}s;">
                        <p class="text-sm" style="color: var(--text-secondary);">
                            <span class="text-xs mono" style="color: var(--accent-purple);">{{ loop.index }}.</span>
                            {{ step }}
                        </p>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% else %}
            <p class="mt-4 text-xs" style="color: var(--text-tertiary);">
                <span class="material-icons text-xs">schedule</span> æ¨ç†é“¾æ•°æ®å¾…æ›´æ–°ï¼ˆä¸‹è½® pipeline å°†è‡ªåŠ¨è¡¥å…¨ï¼‰
            </p>
            {% endif %}

            <!-- Munger å®¡æŸ¥ç»“æœ -->
            {% set munger = inferred.get('munger_review') %}
            {% if munger %}
            {% set ql = munger.get('quality_level', 'unknown') %}
            <div class="mt-4 p-4 rounded-lg" style="background: var(--bg-elevated); border-left: 2px solid {% if ql == 'strong' %}var(--accent-green){% elif ql == 'moderate' %}var(--accent-amber){% else %}var(--accent-red){% endif %};">
                <p class="text-xs mb-2 flex items-center gap-1 font-medium" style="color: var(--text-tertiary);">
                    <span class="material-icons text-xs">gavel</span> Devil's Advocate å®¡æŸ¥ (Munger)
                </p>
                <div class="flex items-center gap-2 mb-2">
                    {% if ql == 'strong' %}
                    <span class="text-sm font-medium" style="color: var(--accent-green);">âœ“ Strong</span>
                    {% elif ql == 'moderate' %}
                    <span class="text-sm font-medium" style="color: var(--accent-amber);">â— Moderate</span>
                    {% else %}
                    <span class="text-sm font-medium" style="color: var(--accent-red);">âœ— Weak</span>
                    {% endif %}
                    {% if munger.get('adjusted_confidence') %}
                    <span class="text-xs mono" style="color: var(--text-tertiary);">
                        è°ƒæ•´åç½®ä¿¡åº¦: {{ (munger.adjusted_confidence * 100) | int }}%
                    </span>
                    {% endif %}
                </div>
                {% if munger.get('concerns') %}
                <div class="text-sm mb-2" style="color: var(--text-secondary);">
                    {% for concern in munger.concerns %}
                    <p>âš  {{ concern }}</p>
                    {% endfor %}
                </div>
                {% endif %}
                {% if munger.get('comment') %}
                <p class="text-sm italic" style="color: var(--text-secondary);">
                    "{{ munger.comment }}"
                </p>
                {% endif %}
            </div>
            {% else %}
            <p class="mt-2 text-xs" style="color: var(--text-tertiary);">
                <span class="material-icons text-xs">schedule</span> Munger å®¡æŸ¥æ•°æ®å¾…æ›´æ–°
            </p>
            {% endif %}

            <div class="mt-3 flex items-center gap-4">
                <span class="text-xs mono" style="color: var(--text-tertiary);">ç½®ä¿¡åº¦: {{ (inferred.get('confidence', 0) * 100) | int }}%</span>
                <div class="confidence-bar flex-1">
                    <div class="confidence-fill {% if inferred.get('confidence', 0) >= 0.8 %}high{% elif inferred.get('confidence', 0) >= 0.6 %}mid{% else %}low{% endif %}"
                         style="width: {{ (inferred.get('confidence', 0) * 100) | int }}%"></div>
                </div>
            </div>
        </div>
        {% elif pain_point.get('hidden_need') %}
        <!-- å…¼å®¹æ—§æ ¼å¼ -->
        <div class="card need-card p-6 mb-4 animate-in ambient-arc" style="animation-delay: 0.1s">
            <h3 class="font-medium mb-3 flex items-center gap-2" style="color: var(--text-primary);">
                <span class="material-icons" style="color: var(--accent-purple);">psychology</span> AI æ¨ç†éœ€æ±‚
                {% if pain_point.get('confidence', 0) < 0.6 %}
                <span class="text-xs px-2 py-05 rounded-full ml-auto" style="background: rgba(212,160,74,0.10); color: var(--accent-amber); border: 1px solid rgba(212,160,74,0.18);">å¾…éªŒè¯</span>
                {% endif %}
            </h3>
            <p class="text-base leading-relaxed" style="color: var(--accent-purple);">{{ pain_point.hidden_need }}</p>
            <div class="mt-3 flex items-center gap-4">
                <span class="text-xs mono" style="color: var(--text-tertiary);">ç½®ä¿¡åº¦: {{ (pain_point.get('confidence', 0) * 100) | int }}%</span>
                <div class="confidence-bar flex-1">
                    <div class="confidence-fill {% if pain_point.get('confidence', 0) >= 0.8 %}high{% elif pain_point.get('confidence', 0) >= 0.6 %}mid{% else %}low{% endif %}"
                         style="width: {{ (pain_point.get('confidence', 0) * 100) | int }}%"></div>
                </div>
            </div>
        </div>
        {% else %}
        <!-- å°šæ— æ¨ç†æ•°æ® -->
        <div class="card need-card p-6 mb-4 animate-in ambient-arc" style="animation-delay: 0.1s">
            <h3 class="font-medium mb-3 flex items-center gap-2" style="color: var(--text-primary);">
                <span class="material-icons" style="color: var(--accent-purple);">psychology</span> AI æ¨ç†éœ€æ±‚
            </h3>
            <p class="text-sm" style="color: var(--text-tertiary);">
                <span class="material-icons text-xs">schedule</span> å°šæœªæ¨å¯¼ï¼Œä¸‹è½® pipeline å°†è‡ªåŠ¨ç”Ÿæˆ
            </p>
        </div>
        {% endif %}

        <!-- å…³è”åŸå¸– -->
        {% if posts %}
        <div class="card p-6 mb-4 animate-in" style="animation-delay: 0.15s">
            <h3 class="font-medium mb-4 flex items-center gap-2" style="color: var(--text-primary);">
                <span class="material-icons" style="color: var(--accent-blue);">forum</span> å…³è”è®¨è®º
                <span class="text-xs mono ml-auto" style="color: var(--text-tertiary);">{{ posts | length }} å¸–</span>
            </h3>
            <div class="space-y-2">
                {% for post in posts %}
                <a href="{{ post.url }}" target="_blank" rel="noopener"
                   class="block p-3 rounded-lg transition"
                   style="background: var(--bg-elevated); border: 1px solid var(--border-subtle);"
                   onmouseenter="this.style.borderColor='var(--border-default)'"
                   onmouseleave="this.style.borderColor='var(--border-subtle)'">
                    <div class="flex items-start gap-3">
                        <div class="w-7 h-7 rounded-md flex items-center justify-center shrink-0 mt-05
                            {% if post.source == 'reddit' %}" style="background: rgba(229,83,75,0.10); color: var(--accent-red);
                            {% elif post.source == 'nga' %}" style="background: rgba(94,196,158,0.10); color: var(--accent-green);
                            {% elif post.source == 'videocardz' %}" style="background: rgba(157,138,191,0.10); color: var(--accent-purple);
                            {% else %}" style="background: rgba(91,141,239,0.10); color: var(--accent-blue);{% endif %}">
                            <span class="material-icons text-sm">
                                {% if post.source == 'reddit' %}reddit
                                {% elif post.source == 'nga' %}language
                                {% elif post.source == 'videocardz' %}newspaper
                                {% else %}article{% endif %}
                            </span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-sm font-medium truncate" style="color: var(--text-primary);">{{ post.title }}</p>
                            <div class="flex items-center gap-3 mt-1 text-xs" style="color: var(--text-tertiary);">
                                <span class="source-dot {{ post.source }}"></span>
                                <span class="uppercase font-medium
                                    {% if post.source == 'reddit' %}" style="color: var(--accent-red);
                                    {% elif post.source == 'nga' %}" style="color: var(--accent-green);
                                    {% elif post.source == 'videocardz' %}" style="color: var(--accent-purple);
                                    {% else %}" style="color: var(--accent-blue);{% endif %}">{{ post.source }}</span>
                                {% if post.replies %}
                                <span class="flex items-center gap-05">
                                    <span class="material-icons text-xs">chat_bubble_outline</span> {{ post.replies }}
                                </span>
                                {% endif %}
                                {% if post.likes %}
                                <span class="flex items-center gap-05">
                                    <span class="material-icons text-xs">thumb_up_off_alt</span> {{ post.likes }}
                                </span>
                                {% endif %}
                                {% if post.timestamp %}
                                <span>{{ post.timestamp[:10] }}</span>
                                {% endif %}
                            </div>
                        </div>
                        <span class="material-icons text-sm shrink-0 mt-1" style="color: var(--text-tertiary);">open_in_new</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% elif pain_point.get('source_urls') %}
        <div class="card p-6 mb-4 animate-in" style="animation-delay: 0.15s">
            <h3 class="font-medium mb-3 flex items-center gap-2" style="color: var(--text-primary);">
                <span class="material-icons" style="color: var(--accent-blue);">link</span> åŸå¸–è¿½æº¯
            </h3>
            <div class="space-y-2">
                {% for url in pain_point.source_urls %}
                <a href="{{ url }}" target="_blank" rel="noopener"
                   class="flex items-center gap-2 p-3 rounded-lg transition"
                   style="background: var(--bg-elevated); border: 1px solid var(--border-subtle);"
                   onmouseenter="this.style.borderColor='var(--border-default)'"
                   onmouseleave="this.style.borderColor='var(--border-subtle)'">
                    <span class="material-icons text-sm" style="color: var(--text-tertiary);">open_in_new</span>
                    <span class="text-sm truncate" style="color: var(--accent-blue);">{{ url }}</span>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- GPU äº§å“æ ‡ç­¾ -->
        {% set gpu = pain_point.get('gpu_tags', {}) %}
        {% if gpu.get('brands') or gpu.get('models') or gpu.get('manufacturers') %}
        <div class="card p-6 mb-4 animate-in" style="animation-delay: 0.2s">
            <h3 class="font-medium mb-4 flex items-center gap-2" style="color: var(--text-primary);">
                <span class="material-icons" style="color: var(--accent-green);">memory</span> GPU äº§å“å…³è”
            </h3>
            <div class="flex flex-wrap gap-x-8 gap-y-4">
                {% if gpu.get('brands') %}
                <div>
                    <p class="text-xs mb-2 uppercase tracking-wider" style="color: var(--text-tertiary);">èŠ¯ç‰‡å“ç‰Œ</p>
                    <div class="flex flex-wrap gap-2">
                        {% for b in gpu.brands %}<span class="brand-tag">{{ b }}</span>{% endfor %}
                    </div>
                </div>
                {% endif %}
                {% if gpu.get('models') %}
                <div>
                    <p class="text-xs mb-2 uppercase tracking-wider" style="color: var(--text-tertiary);">å…·ä½“å‹å·</p>
                    <div class="flex flex-wrap gap-2">
                        {% for m in gpu.models %}<span class="gpu-tag">{{ m }}</span>{% endfor %}
                    </div>
                </div>
                {% endif %}
                {% if gpu.get('manufacturers') %}
                <div>
                    <p class="text-xs mb-2 uppercase tracking-wider" style="color: var(--text-tertiary);">æ¿å¡å‚å•†</p>
                    <div class="flex flex-wrap gap-2">
                        {% for mfr in gpu.manufacturers %}<span class="mfr-tag">{{ mfr }}</span>{% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        {% else %}
        <!-- ç©ºçŠ¶æ€ -->
        <div class="card p-12 text-center animate-in" style="animation-delay: 0.05s">
            <span class="material-icons text-5xl mb-4" style="color: var(--text-tertiary);">search_off</span>
            <p class="text-lg mb-2" style="color: var(--text-secondary);">æœªæ‰¾åˆ°è¯¥ç—›ç‚¹</p>
            <p class="text-sm mb-4" style="color: var(--text-tertiary);">å¯èƒ½å·²è¢«åˆå¹¶æˆ–æ’åå˜åŠ¨</p>
            <a href="/" class="inline-flex items-center gap-1 px-4 py-2 rounded-lg text-sm transition" style="background: var(--accent-blue); color: white;">
                <span class="material-icons text-sm">arrow_back</span> è¿”å›ä»ªè¡¨ç›˜
            </a>
        </div>
        {% endif %}
    </main>

    <footer class="living-footer">
        <span class="footer-status">
            <span class="footer-dot"></span>
            GPU-Insight Â· AI æŒç»­åˆ†æä¸­
        </span>
    </footer>

    <script>
    (function() {
        function css(v) { return getComputedStyle(document.documentElement).getPropertyValue(v).trim(); }
        var t = { text: css('--text-tertiary'), text2: css('--text-secondary'), grid: css('--chart-grid'), blue: css('--accent-blue'), green: css('--accent-green') };
        var trendData = {{ trend_data_json | safe }};
        if (trendData.labels && trendData.labels.length > 1) {
            var ctx = document.getElementById('trendChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: trendData.labels,
                    datasets: [{
                        label: 'PPHI',
                        data: trendData.scores,
                        borderColor: t.blue,
                        backgroundColor: t.blue + '14',
                        fill: true,
                        tension: 0.3,
                        pointRadius: 3,
                        pointBackgroundColor: t.blue,
                        borderWidth: 2,
                    }, {
                        label: 'Mentions',
                        data: trendData.mentions,
                        borderColor: t.green,
                        backgroundColor: 'transparent',
                        tension: 0.3,
                        pointRadius: 2,
                        pointBackgroundColor: t.green,
                        borderWidth: 1.5,
                        borderDash: [4, 2],
                        yAxisID: 'y1',
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: { mode: 'index', intersect: false },
                    plugins: {
                        legend: {
                            labels: { color: t.text2, font: { size: 11 } }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: t.text, font: { size: 10 } },
                            grid: { color: t.grid }
                        },
                        y: {
                            position: 'left',
                            ticks: { color: t.blue, font: { size: 10 } },
                            grid: { color: t.grid },
                            title: { display: true, text: 'PPHI', color: t.blue, font: { size: 10 } }
                        },
                        y1: {
                            position: 'right',
                            ticks: { color: t.green, font: { size: 10 } },
                            grid: { display: false },
                            title: { display: true, text: 'Mentions', color: t.green, font: { size: 10 } }
                        }
                    }
                }
            });
        } else {
            document.getElementById('trendChart').parentElement.innerHTML =
                '<p class="text-xs text-center py-6" style="color: var(--text-tertiary);">éœ€è¦è‡³å°‘ 2 è½®æ•°æ®æ‰èƒ½æ˜¾ç¤ºè¶‹åŠ¿</p>';
        }
    })();
    </script>
</body>
</html>
