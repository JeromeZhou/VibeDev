<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>历史轮次 — GPU-Insight</title>
    <link href="/static/base.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Noto+Sans+SC:wght@400;500;600&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        .run-icon {
            width: 40px; height: 40px;
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
            background: rgba(91,141,239,0.10);
        }
        .search-wrap {
            position: relative;
        }
        .search-wrap .material-icons {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
            font-size: 18px;
        }
        .search-wrap input {
            padding: 6px 12px 6px 32px;
            border-radius: 8px;
            font-size: 12px;
            background: var(--bg-elevated);
            border: 1px solid var(--border-default);
            color: var(--text-primary);
            outline: none;
            width: 180px;
        }
        .search-wrap input:focus {
            border-color: var(--accent-blue);
        }
        .run-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            border-radius: 8px;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            transition: border-color 0.2s ease;
        }
        .run-item:hover {
            border-color: var(--border-default);
        }
    </style>
</head>
<body class="mesh-bg">
    <nav class="site-nav">
        <span class="nav-brand"><span class="material-icons">insights</span> GPU-Insight</span>
        <a href="/"><span class="material-icons">dashboard</span> 仪表盘</a>
        <a href="/trends"><span class="material-icons">trending_up</span> 趋势</a>
        <a href="/history" class="active"><span class="material-icons">history</span> 历史</a>
        <a href="/report"><span class="material-icons">description</span> 报告</a>
        <a href="/admin"><span class="material-icons">admin_panel_settings</span> 管理</a>
    </nav>

    <main class="page-container">
        <div class="card p-6 animate-in">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-base font-semibold flex items-center gap-2" style="color: var(--text-primary);">
                    <span class="material-icons" style="color: var(--accent-amber);">schedule</span>
                    分析轮次列表
                </h2>
                <div class="flex items-center gap-3">
                    <div class="search-wrap">
                        <span class="material-icons">search</span>
                        <input type="text" id="searchBox" placeholder="搜索痛点...">
                    </div>
                    <span class="text-xs mono" style="color: var(--text-tertiary);">共 {{ runs | length }} 轮</span>
                </div>
            </div>

            {% if runs %}
            <div class="space-y-2">
                {% for run in runs %}
                <a href="/history/detail?run_date={{ run.run_date | urlencode }}"
                   class="run-item animate-in"
                   style="animation-delay: {{ loop.index * 0.03 }}s;">
                    <div class="flex items-center gap-4 min-w-0">
                        <div class="run-icon">
                            <span class="material-icons" style="color: var(--accent-blue);">analytics</span>
                        </div>
                        <div class="min-w-0">
                            <p class="text-sm font-medium mono" style="color: var(--text-primary);">{{ run.run_date }}</p>
                            <p class="text-xs truncate mt-2" style="color: var(--text-tertiary);">{{ run.pain_list }}</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4" style="flex-shrink: 0; margin-left: 16px;">
                        <div class="text-center">
                            <p class="text-sm font-semibold mono" style="color: var(--accent-purple);">{{ run.pain_count }}</p>
                            <p class="text-xs" style="color: var(--text-tertiary);">痛点</p>
                        </div>
                        <div class="text-center">
                            <p class="text-sm font-semibold mono" style="color: var(--accent-blue);">{{ run.top_pphi }}</p>
                            <p class="text-xs" style="color: var(--text-tertiary);">Top PPHI</p>
                        </div>
                        <span class="material-icons" style="color: var(--text-tertiary); font-size: 20px;">chevron_right</span>
                    </div>
                </a>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center" style="padding: 48px 0;">
                <span class="material-icons mb-2" style="color: var(--text-tertiary); font-size: 36px;">hourglass_empty</span>
                <p style="color: var(--text-secondary);">暂无历史数据</p>
            </div>
            {% endif %}
        </div>
    </main>

    <footer class="site-footer">GPU-Insight · 显卡用户痛点智能分析系统</footer>

    <script>
    document.getElementById('searchBox').addEventListener('input', function(e) {
        const query = e.target.value.toLowerCase();
        document.querySelectorAll('.run-item').forEach(function(item) {
            const text = item.textContent.toLowerCase();
            item.style.display = text.includes(query) ? '' : 'none';
        });
    });
    </script>
</body>
</html>
