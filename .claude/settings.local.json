{
  "permissions": {
    "allow": [
      "Bash(git init:*)",
      "Bash(git remote add:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git branch:*)",
      "Bash(git push:*)",
      "Bash(git remote set-url:*)",
      "Bash(git config:*)",
      "WebFetch(domain:github.com)",
      "WebSearch",
      "Bash(git clone:*)",
      "Bash(python -c:*)",
      "Bash(where:*)",
      "Bash(py:*)",
      "Bash(conda --version:*)",
      "Bash(winget list:*)",
      "Bash(winget install:*)",
      "Bash(export PATH:*)",
      "Bash(pip install:*)",
      "Bash(python tests/test_pipeline_offline.py:*)",
      "Bash(PYTHONIOENCODING=utf-8 python:*)",
      "WebFetch(domain:docs.siliconflow.cn)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" tests/test_gpu_tagger.py)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -m pytest tests/test_unit.py -v)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" main.py)",
      "Bash(wmic process where \"commandline like ''%main.py%''\" get processid,commandline)",
      "Bash(tasklist:*)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -u main.py)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -c \"import uvicorn; print\\(''uvicorn ok''\\)\")",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -m pip install uvicorn)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -m pip install fastapi jinja2)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -u tests/test_nga.py)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -u -c:*)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -u -c \"\nimport sys, json, httpx, re\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)\n\nwith open\\(''cookies/nga.json'', ''r'', encoding=''utf-8''\\) as f:\n    cookie_list = json.load\\(f\\)\ncookies = {c[''name'']: c[''value''] for c in cookie_list if ''.nga.cn'' in c.get\\(''domain'', ''''\\)}\n\nheaders = {\n    ''User-Agent'': ''Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36'',\n    ''Referer'': ''https://bbs.nga.cn/'',\n}\n\n# 试更多 fid，找到真正的硬件/显卡区\ntest_fids = [414, 200, 485, 320, 350, 436, 489, 490, 492, 493, 330, 335, 340, 354, 355, 356]\n\nfor fid in test_fids:\n    try:\n        url = f''https://bbs.nga.cn/thread.php?fid={fid}&page=1&__output=11''\n        resp = httpx.get\\(url, headers=headers, cookies=cookies, timeout=10, follow_redirects=True\\)\n        text = resp.text.strip\\(\\)\n        if text.startswith\\(''window.script_muti_get_var_store''\\):\n            text = re.sub\\(r''^window\\\\.script_muti_get_var_store\\\\s*=\\\\s*'', '''', text\\)\n            text = text.rstrip\\('';''\\)\n        data = json.loads\\(text\\)\n        \n        if ''error'' in data:\n            print\\(f''  fid={fid:>5} -> 错误''\\)\n            continue\n            \n        result = data.get\\(''data'', data\\)\n        fname = result.get\\(''__F'', {}\\).get\\(''name'', ''?''\\) if isinstance\\(result.get\\(''__F''\\), dict\\) else ''?''\n        threads = result.get\\(''__T'', []\\)\n        tcount = len\\(threads\\) if isinstance\\(threads, \\(list, dict\\)\\) else 0\n        \n        # 看第一条帖子标题\n        first_title = ''''\n        items = threads.items\\(\\) if isinstance\\(threads, dict\\) else enumerate\\(threads\\)\n        for k, t in items:\n            if isinstance\\(t, dict\\) and t.get\\(''subject''\\):\n                first_title = re.sub\\(r''<[^>]+>'', '''', t[''subject'']\\).strip\\(\\)[:40]\n                break\n        \n        print\\(f''  fid={fid:>5} [{fname}] {tcount}条 | {first_title}''\\)\n    except Exception as e:\n        print\\(f''  fid={fid:>5} -> {str\\(e\\)[:50]}''\\)\n\")",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" tests/probe_nga_fids.py)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" tests/probe_nga_detail.py)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" tests/test_nga.py)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" tests/test_db.py)",
      "Bash(findstr:*)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -c \"\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)\nfrom src.utils.db import get_db\nconn = get_db\\(\\)\nconn.execute\\(''DELETE FROM posts''\\)\nconn.commit\\(\\)\nprint\\(''posts 表已清空''\\)\nstats = conn.execute\\(''SELECT COUNT\\(*\\) FROM posts''\\).fetchone\\(\\)\nprint\\(f''剩余: {stats[0]} 条''\\)\nconn.close\\(\\)\n\")",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -c:*)",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -c \"\nimport sys, os, time\nsys.stdout.reconfigure\\(encoding=''utf-8''\\)\nfrom dotenv import load_dotenv\nfrom pathlib import Path\nload_dotenv\\(Path\\(''.env''\\)\\)\nfrom openai import OpenAI\n\nclient = OpenAI\\(\n    api_key=os.getenv\\(''SILICONFLOW_API_KEY''\\),\n    base_url=''https://api.siliconflow.cn/v1'',\n    timeout=30.0,\n\\)\n\n# Test multiple models\nmodels = [\n    ''Qwen/Qwen2.5-7B-Instruct'',\n    ''THUDM/glm-4-9b-chat'',\n    ''deepseek-ai/DeepSeek-V2.5'',\n    ''Pro/Qwen/Qwen2.5-72B-Instruct'',\n]\n\nfor model in models:\n    print\\(f''Testing {model}...'', end='' ''\\)\n    start = time.time\\(\\)\n    try:\n        resp = client.chat.completions.create\\(\n            model=model,\n            messages=[{''role'':''user'',''content'':''classify: 1=pain 0=not. Reply numbers only.\\\\n1. GPU crashes\\\\n2. New GPU unboxing\\\\n3. Driver issues''}],\n            max_tokens=20,\n            temperature=0.1,\n        \\)\n        elapsed = time.time\\(\\) - start\n        print\\(f''OK \\({elapsed:.1f}s\\): {resp.choices[0].message.content.strip\\(\\)[:50]}''\\)\n    except Exception as e:\n        elapsed = time.time\\(\\) - start\n        print\\(f''FAIL \\({elapsed:.1f}s\\): {str\\(e\\)[:60]}''\\)\n\")",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -c \"\nimport sys; sys.stdout.reconfigure\\(encoding=''utf-8''\\)\nfrom src.utils.db import get_db\nconn = get_db\\(\\)\nconn.execute\\(''DELETE FROM posts''\\)\nconn.commit\\(\\)\nprint\\(''DB cleared''\\)\nconn.close\\(\\)\n\")",
      "Bash(\"C:/Users/Jerome/AppData/Local/Programs/Python/Python312/python.exe\" -c \"\nimport sys; sys.stdout.reconfigure\\(encoding=''utf-8''\\)\nfrom src.utils.db import get_db\nconn = get_db\\(\\); conn.execute\\(''DELETE FROM posts''\\); conn.commit\\(\\); conn.close\\(\\)\nprint\\(''DB cleared''\\)\n\")"
    ]
  }
}
